#  Fleet Server Installation

>This document describes how Fleet Server was deployed and validated in the **Elastic Cyber Lab**.  
>It reflects the **actual setup and steps performed**.

Fleet Server is used to centrally manage Elastic Agents and policies through Kibana.

---

##  Environment Context

- **Host OS:** Ubuntu
- **Hostname:** `es01.soc.lab` (also appeared as `labtest-VirtualBox`)
- **Elastic Stack Version:** 8.19.x
- **Co-located Services:**
  - Elasticsearch
  - Kibana
  - Logstash
- **Fleet Server runs as:** Elastic Agent (Fleet Server mode)

---

##  Why Fleet Server Was Added

Fleet Server was introduced to:
- Centrally manage Elastic Agents
- Assign policies from Kibana
- Enroll a Windows 10 endpoint into the lab
- Validate modern Elastic Stack architecture (Fleet-based ingestion)

---

##  Installation Method

Fleet Server was installed **via the Kibana Fleet UI**, using the command generated by:

Fleet → Agents → Add Fleet Server


The installation command was executed **directly on the Ubuntu VM** hosting Elasticsearch and Kibana.

---

##  Installation Command (As Used)

The following command (or equivalent) was used during installation:

```bash
sudo ./elastic-agent install \
  --url=https://es01.soc.lab:8220 \
  --enrollment-token=<FLEET_SERVER_ENROLLMENT_TOKEN> \
  --fleet-server-es=https://es01.soc.lab:9200 \
  --fleet-server-policy=Fleet Server Policy
```

Notes:

The enrollment token was generated in Kibana

Fleet Server listens on port 8220

Elasticsearch was already secured with TLS

Elastic Agent was installed as a system service

---

## Post-Installation Verification
### Fleet UI – Agent Status

In Fleet → Agents, the Fleet Server appears as:

```yaml
Host: es01.soc.lab / labtest-VirtualBox

Status: Healthy

Agent Policy: Fleet Server Policy

Version: 8.19.8 (upgrade available)
```

This confirms:

Fleet Server is running

It is communicating with Elasticsearch

It is managed via Kibana

### Agent Overview

Fleet Server shows:

```yaml
Running as root

Platform: ubuntu

Logging level: info

Integrations:

fleet_server-1

system-1
```

### Index Verification

In Stack Management → Index Management, Fleet-related indices are visible:

```yaml
.ds-.fleet-actions-results-*
```
Other filebeat-* indices from ingestion

This confirms:

Fleet Server is actively processing actions

Elasticsearch is receiving Fleet-related data

---

## Enrolled Agents

At this stage, the following agents were visible:

```yaml
Hostname	                 Policy	                  Status
es01.soc.lab	       Fleet Server Policy	          Healthy
DESKTOP-D6MDETS   	windows-endpoint-policy         Healthy
```
This confirms successful Fleet Server operation and downstream agent enrollment.
